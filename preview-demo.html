<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ç”Ÿè¾°å…«å­—å°ç¨‹åº - é¡µé¢é¢„è§ˆ</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
      background: linear-gradient(135deg, #FFF5F5 0%, #FFE5E5 100%);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
    }

    .phone-frame {
      width: 375px;
      height: 667px;
      background: white;
      border-radius: 30px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      overflow: hidden;
      position: relative;
    }

    .status-bar {
      height: 44px;
      background: #C8102E;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 17px;
      font-weight: 600;
    }

    .page-container {
      height: calc(100% - 44px);
      background: linear-gradient(135deg, #FFF5F5 0%, #FFE5E5 100%);
      overflow-y: auto;
      padding: 20px;
    }

    .form-card {
      background: white;
      border-radius: 20px;
      padding: 24px;
      box-shadow: 0 4px 20px rgba(200, 16, 46, 0.1);
    }

    .form-item {
      margin-bottom: 24px;
    }

    .form-label {
      display: flex;
      align-items: center;
      margin-bottom: 12px;
      font-size: 15px;
      font-weight: 600;
      color: #333;
    }

    .label-icon {
      margin-right: 8px;
      font-size: 18px;
    }

    .gender-section .gender-tabs {
      display: flex;
      gap: 12px;
    }

    .gender-tab {
      flex: 1;
      height: 50px;
      border-radius: 12px;
      border: 2px solid #E0E0E0;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      font-size: 15px;
      cursor: pointer;
      transition: all 0.3s;
    }

    .gender-tab.male {
      color: #666;
    }

    .gender-tab.male.active {
      background: linear-gradient(135deg, #4A90E2 0%, #357ABD 100%);
      border-color: #4A90E2;
      color: white;
      box-shadow: 0 4px 12px rgba(74, 144, 226, 0.3);
    }

    .gender-tab.female {
      color: #666;
    }

    .gender-tab.female.active {
      background: linear-gradient(135deg, #FF6B9D 0%, #E85A8F 100%);
      border-color: #FF6B9D;
      color: white;
      box-shadow: 0 4px 12px rgba(255, 107, 157, 0.3);
    }

    .tab-icon {
      font-size: 20px;
    }

    .picker-wrapper {
      background: #F8F8F8;
      border-radius: 12px;
      padding: 14px 16px;
      cursor: pointer;
      transition: all 0.3s;
    }

    .picker-wrapper:hover {
      background: #F0F0F0;
    }

    .picker-display {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .picker-value {
      font-size: 15px;
      color: #333;
      font-weight: 500;
    }

    .picker-arrow {
      font-size: 12px;
      color: #999;
    }

    .submit-btn {
      width: 100%;
      height: 50px;
      background: linear-gradient(135deg, #C8102E 0%, #A00D26 100%);
      color: white;
      border: none;
      border-radius: 25px;
      font-size: 17px;
      font-weight: 600;
      cursor: pointer;
      margin-top: 32px;
      box-shadow: 0 6px 20px rgba(200, 16, 46, 0.3);
      transition: all 0.3s;
    }

    .submit-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(200, 16, 46, 0.4);
    }

    .submit-btn:active {
      transform: translateY(0);
    }

    /* æ¨¡æ‹ŸåŠ è½½é¡µé¢ */
    .info-page {
      display: none;
      height: 100%;
      padding: 20px;
      background: linear-gradient(135deg, #FFF5F5 0%, #FFE5E5 100%);
    }

    .info-page.show {
      display: block;
    }

    .loading-box {
      text-align: center;
      padding: 60px 20px;
      background: white;
      border-radius: 20px;
      box-shadow: 0 4px 20px rgba(200, 16, 46, 0.1);
    }

    .loading-spinner {
      width: 40px;
      height: 40px;
      border: 4px solid #f3f3f3;
      border-top: 4px solid #C8102E;
      border-radius: 50%;
      margin: 0 auto 20px;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .loading-text {
      font-size: 16px;
      color: #666;
    }

    .console-panel {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 400px;
      max-height: 300px;
      background: #1e1e1e;
      color: #d4d4d4;
      border-radius: 8px;
      padding: 12px;
      font-family: 'Consolas', 'Monaco', monospace;
      font-size: 12px;
      overflow-y: auto;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
      z-index: 1000;
    }

    .console-title {
      color: #4ec9b0;
      font-weight: bold;
      margin-bottom: 8px;
      padding-bottom: 8px;
      border-bottom: 1px solid #333;
    }

    .console-log {
      margin: 4px 0;
      padding: 4px;
      border-left: 3px solid #4ec9b0;
      padding-left: 8px;
    }

    .console-error {
      border-left-color: #f48771;
      color: #f48771;
    }

    .console-success {
      border-left-color: #4ec9b0;
      color: #4ec9b0;
    }

    .instruction {
      position: fixed;
      top: 20px;
      left: 20px;
      background: white;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
      max-width: 350px;
    }

    .instruction h3 {
      margin-bottom: 12px;
      color: #C8102E;
      font-size: 16px;
    }

    .instruction p {
      margin-bottom: 8px;
      color: #666;
      font-size: 14px;
      line-height: 1.6;
    }

    .instruction .step {
      margin-left: 20px;
      color: #333;
    }
  </style>
</head>
<body>
  <div class="instruction">
    <h3>ğŸ“± é¡µé¢é¢„è§ˆè¯´æ˜</h3>
    <p><strong>å½“å‰å±•ç¤ºï¼š</strong>é¦–é¡µè¡¨å•</p>
    <p class="step">1ï¸âƒ£ æŸ¥çœ‹é¡µé¢å¸ƒå±€å’Œæ ·å¼</p>
    <p class="step">2ï¸âƒ£ ç‚¹å‡»"ç…§è§æœ¬å¿ƒ"æŒ‰é’®</p>
    <p class="step">3ï¸âƒ£ è§‚å¯Ÿå³ä¸‹è§’æ§åˆ¶å°æ—¥å¿—</p>
    <p class="step">4ï¸âƒ£ é¡µé¢ä¼šè·³è½¬åˆ°åŠ è½½çŠ¶æ€</p>
    <p style="margin-top: 12px; color: #C8102E; font-weight: bold;">
      âš ï¸ å®é™…æ¥å£è°ƒç”¨éœ€åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­æµ‹è¯•
    </p>
  </div>

  <div class="phone-frame">
    <div class="status-bar">ç”Ÿè¾°å…«å­—</div>
    
    <!-- é¦–é¡µ -->
    <div class="page-container" id="indexPage">
      <div class="form-card">
        <!-- æ€§åˆ«é€‰æ‹© -->
        <div class="form-item gender-section">
          <div class="form-label">
            <span class="label-icon">âš¤</span>
            <span>æ€§åˆ«</span>
          </div>
          <div class="gender-tabs">
            <div class="gender-tab male active" id="maleTab" onclick="selectGender('male')">
              <span class="tab-icon">â™‚</span>
              <span>ç”·</span>
            </div>
            <div class="gender-tab female" id="femaleTab" onclick="selectGender('female')">
              <span class="tab-icon">â™€</span>
              <span>å¥³</span>
            </div>
          </div>
        </div>

        <!-- å‡ºç”Ÿå¹´ä»½ -->
        <div class="form-item">
          <div class="form-label">
            <span class="label-icon">ğŸ“…</span>
            <span>å‡ºç”Ÿå¹´ä»½</span>
          </div>
          <div class="picker-wrapper">
            <div class="picker-display">
              <span class="picker-value" id="yearValue">2014å¹´</span>
              <span class="picker-arrow">â–¼</span>
            </div>
          </div>
        </div>

        <!-- å‡ºç”Ÿæœˆä»½ -->
        <div class="form-item">
          <div class="form-label">
            <span class="label-icon">ğŸ“†</span>
            <span>å‡ºç”Ÿæœˆä»½</span>
          </div>
          <div class="picker-wrapper">
            <div class="picker-display">
              <span class="picker-value" id="monthValue">6æœˆ</span>
              <span class="picker-arrow">â–¼</span>
            </div>
          </div>
        </div>

        <!-- å‡ºç”Ÿæ—¥æœŸ -->
        <div class="form-item">
          <div class="form-label">
            <span class="label-icon">âœ“</span>
            <span>å‡ºç”Ÿæ—¥æœŸ</span>
          </div>
          <div class="picker-wrapper">
            <div class="picker-display">
              <span class="picker-value" id="dayValue">15æ—¥</span>
              <span class="picker-arrow">â–¼</span>
            </div>
          </div>
        </div>

        <!-- å‡ºç”Ÿæ—¶è¾° -->
        <div class="form-item">
          <div class="form-label">
            <span class="label-icon">ğŸ•</span>
            <span>å‡ºç”Ÿæ—¶è¾°</span>
          </div>
          <div class="picker-wrapper">
            <div class="picker-display">
              <span class="picker-value" id="timeValue">åˆæ—¶ (11:00-12:59)</span>
              <span class="picker-arrow">â–¼</span>
            </div>
          </div>
        </div>

        <!-- æäº¤æŒ‰é’® -->
        <button class="submit-btn" onclick="handleSubmit()">
          ç…§è§æœ¬å¿ƒ
        </button>
      </div>
    </div>

    <!-- ä¿¡æ¯å±•ç¤ºé¡µ -->
    <div class="info-page" id="infoPage">
      <div class="loading-box">
        <div class="loading-spinner"></div>
        <div class="loading-text">æ­£åœ¨åˆ†æä¸­...</div>
      </div>
    </div>
  </div>

  <div class="console-panel" id="console">
    <div class="console-title">ğŸ“Š æ§åˆ¶å°æ—¥å¿—</div>
    <div id="consoleContent">
      <div class="console-log">ç­‰å¾…æ“ä½œ...</div>
    </div>
  </div>

  <script>
    let gender = 'male';
    let currentData = {
      gender: 'male',
      year: 2014,
      month: 6,
      day: 15,
      time: 'åˆæ—¶',
      hour: 11
    };

    function log(message, type = 'log') {
      const consoleContent = document.getElementById('consoleContent');
      const logDiv = document.createElement('div');
      logDiv.className = `console-${type}`;
      logDiv.textContent = message;
      consoleContent.appendChild(logDiv);
      consoleContent.scrollTop = consoleContent.scrollHeight;
    }

    function selectGender(g) {
      gender = g;
      currentData.gender = g;
      
      document.getElementById('maleTab').classList.toggle('active', g === 'male');
      document.getElementById('femaleTab').classList.toggle('active', g === 'female');
      
      log(`é€‰æ‹©æ€§åˆ«: ${g === 'male' ? 'ç”·' : 'å¥³'}`);
    }

    function convertTimeToHour(time) {
      const timeMap = {
        'å­æ—¶': 23, 'ä¸‘æ—¶': 1, 'å¯…æ—¶': 3, 'å¯æ—¶': 5,
        'è¾°æ—¶': 7, 'å·³æ—¶': 9, 'åˆæ—¶': 11, 'æœªæ—¶': 13,
        'ç”³æ—¶': 15, 'é…‰æ—¶': 17, 'æˆŒæ—¶': 19, 'äº¥æ—¶': 21
      };
      return timeMap[time] || 11;
    }

    function handleSubmit() {
      log('='.repeat(50), 'log');
      log('ğŸš€ ç‚¹å‡»æäº¤æŒ‰é’®', 'success');
      log('='.repeat(50), 'log');
      
      // è½¬æ¢æ—¶è¾°
      const hour = convertTimeToHour(currentData.time);
      currentData.hour = hour;
      
      log(`ğŸ“ æ”¶é›†çš„æ•°æ®:`, 'log');
      log(`   æ€§åˆ«: ${currentData.gender}`, 'log');
      log(`   å‡ºç”Ÿ: ${currentData.year}å¹´${currentData.month}æœˆ${currentData.day}æ—¥`, 'log');
      log(`   æ—¶è¾°: ${currentData.time} â†’ ${hour}æ—¶`, 'log');
      
      log('', 'log');
      log('ğŸ”„ æ—¶è¾°è½¬æ¢é€»è¾‘:', 'success');
      log(`   ${currentData.time} â†’ ${hour}å°æ—¶(24å°æ—¶åˆ¶)`, 'log');
      
      log('', 'log');
      log('ğŸ“¡ æ¨¡æ‹Ÿæ¥å£è°ƒç”¨:', 'success');
      
      // æ¨¡æ‹Ÿç”Ÿæˆç­¾å
      const timestamp = Date.now();
      const mockOpenId = 'test_openid_' + timestamp;
      
      const requestData = {
        openId: mockOpenId,
        gender: currentData.gender,
        year: currentData.year,
        month: currentData.month,
        day: currentData.day,
        hour: hour
      };
      
      log(`   URL: http://localhost:8080/api/bazi/analyze`, 'log');
      log(`   Method: POST`, 'log');
      log(`   Headers:`, 'log');
      log(`     Content-Type: application/json`, 'log');
      log(`     X-Timestamp: ${timestamp}`, 'log');
      log(`     X-Sign: [MD5ç­¾å]`, 'log');
      log(`   Request Body:`, 'log');
      log(`     ${JSON.stringify(requestData, null, 6)}`, 'log');
      
      log('', 'log');
      log('âœ… å‡†å¤‡è·³è½¬åˆ°ä¿¡æ¯å±•ç¤ºé¡µ...', 'success');
      
      // æ¨¡æ‹Ÿé¡µé¢è·³è½¬
      setTimeout(() => {
        document.getElementById('indexPage').style.display = 'none';
        document.getElementById('infoPage').classList.add('show');
        
        log('', 'log');
        log('ğŸ“„ å·²è·³è½¬åˆ°ä¿¡æ¯å±•ç¤ºé¡µ', 'success');
        log('â³ æ˜¾ç¤ºåŠ è½½çŠ¶æ€: "æ­£åœ¨åˆ†æä¸­..."', 'log');
        log('', 'log');
        log('ğŸ’¡ å®é™…è¿è¡Œæ—¶ä¼š:', 'log');
        log('   1. è°ƒç”¨çœŸå®åç«¯æ¥å£', 'log');
        log('   2. ç­‰å¾…Gemini AIåˆ†æ', 'log');
        log('   3. å±•ç¤ºå…«å­—å’Œåˆ†æç»“æœ', 'log');
        log('', 'log');
        log('âš ï¸ å®Œæ•´æµ‹è¯•è¯·åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­è¿›è¡Œ', 'error');
      }, 500);
    }

    // åˆå§‹åŒ–æ—¥å¿—
    log('âœ¨ é¡µé¢é¢„è§ˆå·²åŠ è½½');
    log('ğŸ‘‰ è¯·ç‚¹å‡»"ç…§è§æœ¬å¿ƒ"æŒ‰é’®æŸ¥çœ‹æ•ˆæœ');
  </script>
</body>
</html>
