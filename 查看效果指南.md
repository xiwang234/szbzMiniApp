# 🎯 查看页面效果和接口调用 - 操作指南

## 📱 方式一：微信开发者工具（真实效果）

### 步骤1: 启动后端服务

**打开新的命令行窗口**，执行：

```bash
cd D:\project\szbz
mvn spring-boot:run
```

等待看到：
```
Started SzbzApiApplication in 3.xxx seconds
```

### 步骤2: 打开微信开发者工具

1. **启动微信开发者工具**

2. **导入项目**
   - 点击 `+` 或 `导入项目`
   - 项目目录：`d:\project\szbzMiniApp`
   - AppID：选择 `测试号` 或使用自己的AppID

3. **关键配置**
   - 点击右上角 `详情`
   - 勾选 `不校验合法域名、web-view、TLS版本及HTTPS证书`
   - 确保 `ES6 转 ES5` 已勾选

### 步骤3: 查看首页效果

**您将看到：**
- ✅ 红色顶部导航栏 "生辰八字"
- ✅ 白色表单卡片
- ✅ 性别选择（男蓝色/女粉红色）
- ✅ 出生年月日时辰选择器
- ✅ 红色渐变按钮 "照见本心"

### 步骤4: 测试按钮点击

1. **填写测试数据**
   ```
   性别: 男
   出生年份: 2014年
   出生月份: 6月
   出生日期: 15日
   出生时辰: 午时 (11:00-12:59)
   ```

2. **打开控制台**
   - 点击开发者工具底部的 `Console` 标签

3. **点击"照见本心"按钮**

### 步骤5: 观察控制台输出

**您会看到以下日志：**

```javascript
请求参数: {
  openId: "test_openid_1734422400000",
  gender: "male",
  year: 2014,
  month: 6,
  day: 15,
  hour: 11  // 午时已转换为11
}

时间戳: 1734422400000

签名: a1b2c3d4e5f6g7h8... (32位MD5)
```

### 步骤6: 查看网络请求

切换到 `Network` 标签，您会看到：

```
Name: analyze
Method: POST
Status: 200 (成功) 或 failed (后端未启动)
Type: xhr
```

点击该请求，查看详情：
- **Request Headers:** 包含 X-Timestamp 和 X-Sign
- **Request Payload:** JSON数据
- **Response:** 后端返回的八字和AI分析

### 步骤7: 查看页面跳转

**成功情况：**
1. 页面自动跳转到 info 页面
2. 先显示 "正在分析中..." 加载动画
3. 1-3秒后显示分析结果：

```
【基本信息】
性别：男
出生时间：2014年6月15日 11时

【生辰八字】
年柱：甲午
月柱：庚午
日柱：戊申
时柱：壬午

【AI智能分析】
(Gemini API返回的详细分析内容)
```

**失败情况：**
- 显示错误提示
- 可以点击 "重新加载" 按钮

---

## 🌐 方式二：快速预览（仅查看UI效果）

如果您只是想快速查看UI效果（不测试真实接口），可以：

**在命令行执行：**
```bash
cd d:\project\szbzMiniApp
explorer preview-demo.html
```

这会在浏览器中打开预览页面，可以看到：
- ✅ 首页完整UI
- ✅ 按钮点击效果
- ✅ 模拟的控制台日志
- ✅ 页面跳转动画

**但无法测试：**
- ❌ 真实的接口调用
- ❌ 后端数据返回
- ❌ 签名验证

---

## ✅ 验证清单

### 首页效果验证
- [ ] 页面布局正常
- [ ] 性别按钮可以切换（男蓝/女粉）
- [ ] 年月日选择器可以点击
- [ ] 时辰选择器显示12个时辰
- [ ] 提交按钮显示 "照见本心"

### 点击按钮验证
- [ ] 控制台输出请求参数
- [ ] 时辰正确转换为小时数（午时→11）
- [ ] 控制台输出时间戳
- [ ] 控制台输出签名
- [ ] Network面板看到POST请求

### 接口调用验证
- [ ] 请求URL正确（localhost:8080/api/bazi/analyze）
- [ ] 请求方法为POST
- [ ] 请求头包含X-Timestamp和X-Sign
- [ ] 请求体包含完整参数
- [ ] 后端返回200状态码
- [ ] 返回数据包含baziResult和aiAnalysis

### 页面跳转验证
- [ ] 自动跳转到info页面
- [ ] 显示加载动画
- [ ] 显示八字信息
- [ ] 显示AI分析内容
- [ ] 可以滚动查看完整内容

---

## 🐛 常见问题

### Q1: 点击按钮没有反应
**检查：**
- 打开Console查看是否有报错
- 确认 index.js 中 handleSubmit 方法存在

### Q2: 控制台显示"网络请求失败"
**原因：** 后端服务未启动
**解决：** 
```bash
cd D:\project\szbz
mvn spring-boot:run
```

### Q3: 页面不跳转
**检查：**
- app.json 中是否注册了 pages/info/info
- info.js 文件是否存在

### Q4: 显示"签名验证失败"
**原因：** 前后端签名算法不一致
**解决：** 运行签名测试验证

---

## 📸 关键截图位置

建议截图保存：
1. 首页完整界面
2. Console日志输出
3. Network请求详情
4. info页加载状态
5. 最终展示结果

---

## 🚀 现在就开始！

**推荐操作顺序：**

1. ✅ 打开命令行启动后端
2. ✅ 打开微信开发者工具
3. ✅ 导入项目并关闭域名校验
4. ✅ 查看首页UI效果
5. ✅ 填写测试数据
6. ✅ 点击按钮观察日志
7. ✅ 查看Network请求
8. ✅ 等待页面跳转
9. ✅ 查看分析结果

**预计用时：** 5-10分钟

**需要帮助？** 查看《快速启动指南.md》或《真机测试步骤.md》
