<!--pages/index/index.wxml-->
<view class="page-container">
  <!-- 隐私政策弹框 -->
  <view class="privacy-modal" wx:if="{{showPrivacyModal}}" catchtouchmove="preventTouchMove">
    <view class="privacy-mask"></view>
    <view class="privacy-content">
      <view class="privacy-title">温馨提示</view>
      <view class="privacy-text">
        <text>欢迎您使用光照吉途。我们将通过</text>
        <text>《光照吉途小程序隐私政策》、《光照吉途小程序服务协议》</text>
        <text>帮助您了解我们收集、使用存储和共享个人信息的情况，以及您享受的所有相关权利。详细信息请阅读</text>
        <text class="privacy-link" bindtap="openPrivacyPolicy">《光照吉途小程序隐私政策》</text>
        <text>、</text>
        <text class="privacy-link" bindtap="openServiceAgreement">《光照吉途小程序服务协议》</text>
        <text>。</text>
      </view>
      <view class="privacy-buttons">
        <button class="privacy-btn agree-btn" bindtap="handleAgreePrivacy">同意</button>
        <button class="privacy-btn reject-btn" bindtap="handleRejectPrivacy">拒绝并退出</button>
      </view>
    </view>
  </view>

  <!-- 表单卡片 -->
  <view class="form-card">
    <view class="page-title">吉途</view>
    
    <!-- 性别选择 -->
    <view class="form-item gender-section">
      <view class="form-label">
        <text class="label-icon">⚤</text>
        <text>性别</text>
      </view>
      <view class="gender-tabs">
        <view 
          class="gender-tab male {{gender === 'male' ? 'active' : ''}}"
          bindtap="selectGender"
          data-gender="male"
        >
          <text class="tab-icon">♂</text>
          <text>男</text>
        </view>
        <view 
          class="gender-tab female {{gender === 'female' ? 'active' : ''}}"
          bindtap="selectGender"
          data-gender="female"
        >
          <text class="tab-icon">♀</text>
          <text>女</text>
        </view>
      </view>
    </view>

    <!-- 出生年份 -->
    <view class="form-item">
      <view class="form-label">
        <text class="label-icon">📅</text>
        <text>出生年份</text>
      </view>
      <view class="picker-wrapper">
        <picker mode="selector" range="{{yearList}}" value="{{yearIndex}}" bindchange="onYearChange">
          <view class="picker-display">
            <text class="picker-value">{{year}}年</text>
            <text class="picker-arrow">▼</text>
          </view>
        </picker>
      </view>
    </view>

    <!-- 出生月份 -->
    <view class="form-item">
      <view class="form-label">
        <text class="label-icon">📆</text>
        <text>出生月份</text>
      </view>
      <view class="picker-wrapper">
        <picker mode="selector" range="{{monthList}}" value="{{monthIndex}}" bindchange="onMonthChange">
          <view class="picker-display">
            <text class="picker-value">{{month}}月</text>
            <text class="picker-arrow">▼</text>
          </view>
        </picker>
      </view>
    </view>

    <!-- 出生日期 -->
    <view class="form-item">
      <view class="form-label">
        <text class="label-icon">✓</text>
        <text>出生日期</text>
      </view>
      <view class="picker-wrapper">
        <picker mode="selector" range="{{dayList}}" value="{{dayIndex}}" bindchange="onDayChange">
          <view class="picker-display">
            <text class="picker-value">{{day}}日</text>
            <text class="picker-arrow">▼</text>
          </view>
        </picker>
      </view>
    </view>

    <!-- 出生时辰 -->
    <view class="form-item">
      <view class="form-label">
        <text class="label-icon">🕐</text>
        <text>出生时辰</text>
      </view>
      <view class="picker-wrapper">
        <picker mode="selector" range="{{timeList}}" range-key="label" value="{{timeIndex}}" bindchange="onTimeChange">
          <view class="picker-display">
            <text class="picker-value">{{timeLabel}}</text>
            <text class="picker-arrow">▼</text>
          </view>
        </picker>
      </view>
    </view>

    <!-- 提交按钮 -->
    <button class="submit-btn" bindtap="handleSubmit">
      照见本心
    </button>
  </view>
</view>
